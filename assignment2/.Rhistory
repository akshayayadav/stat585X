q()
360/24
15*12
q()
rep(16+9*0:11, each=4)
rep(16+9*0:11, each=4) + c(1,7,8,9)
rep(16+9*0:11, each=4) + c(6,7,8,9)
rep(c("Value","DMflag", "QCflag", "DSflag"), 12)
paste0(rep(c("Value","DMflag", "QCflag", "DSflag"), 12),
rep(1:12, each=4))
library(tidyverse)
library(tidyverse)
install.packages("tidyverse")
library(tidyverse)
install.packages("haven")
install.packages("httr")
install.packages("readr")
install.packages("curl")
install.packages("rvest")
install.packages(“devtools”)
install.packages(“devtools”)
install.packages("devtools")
library(tidyverse)
temps <- read_fwf("/home/akshay/courses/stat585X/materials/data/USH00132999.raw.tmax",
col_positions = fwf_positions(
start=c( 1,13, rep(16+9*0:11, each=4) + c(1,7,8,9)),
end  =c(11,16, rep(16+9*0:11, each=4) + c(6,7,8,9))))
names(temps) <- c("Station", "Year",
paste0(rep(c("Value","DMflag", "QCflag", "DSflag"), 12),
rep(1:12, each=4)))
temps %>%
gather(key="Month", value="Temp_Max", starts_with("Value"))
temps
temps %>%
gather(key="Month", value="Temp_Max", starts_with("Val"))
temps %>%
gather(key="Month", value="Temp_Max", starts_with("Value"))
FortDodge$Month <- as.numeric(gsub("Value", "", FortDodge$Month))
FortDodge$Temp_Max <- replace(FortDodge$Temp_Max,
FortDodge$Temp_Max == -9999, NA)
FortDodge <- temps %>%
gather(key="Month", value="Temp_Max", starts_with("Value"))
FortDodge$Month <- as.numeric(gsub("Value", "", FortDodge$Month))
FortDodge$Temp_Max <- replace(FortDodge$Temp_Max,
FortDodge$Temp_Max == -9999, NA)
FortDodge
FortDodge$Month
FortDodge$Year
library(rvest)
url <- "http://www.nytimes.com/elections/results/iowa"
doc <- read_html(url)
tables <- html_table(doc, fill=TRUE)
names(tables)
tables
tables[2]
tables[[2]]
modes(tables[[2]])
mode(tables[[2]])
tables[[2]]$`Vote by county`
mgp
mpg
data(mpg)
q()
data(Glass)
library(datasets)
data(Glass)
Glass
glass
library(mlbench)
install.packages("mlbench")
library(mlbench)
data(Glass)
install.packages("plyr")
Glass
ddply(Glass,.(RI),mean
ddply(Glass,.(RI),mean)
daply(Glass,.(RI),mean)
libray(plyr)
library(plyr)
daply(Glass,.(RI),mean)
daply(Glass,.(Type),mean)
daply(Glass.(Type),mean)
daply(Glass.(Type,RI),mean)
daply(Glass,.(Type,RI),mean)
aggregate(Glass,list(glassRI=RI),mean)
aggregate(Glass,list(region),mean)
aggregate(Glass,list(Type),mean)
aggregate(Glass,list(Type=Glass$Type),mean)
data(state.x77)
daply(Glass,"Type",mean)
daply(Glass,"Type",summerise)
daply(Glass,"Type",summarise)
daply(Glass,"Type",summarise,mean.RI=mean(RI))
ddply(Glass,"Type",summarise,mean.RI=mean(RI))
ddply(Glass,"Type",mean.RI=mean(RI))
ddply(Glass,"Type",mean(RI))
ddply(Glass,.(Type),mean(RI))
ddply(Glass,.(Type),mean.RI=mean(RI))
ddply(Glass,"Type",summarise)
dfx <- data.frame(
group = c(rep('A', 8), rep('B', 15), rep('C', 6)),
sex = sample(c("M", "F"), size = 29, replace = TRUE),
age = runif(n = 29, min = 18, max = 54)
)
dfx
ddply(dfx, .(group, sex), summarize,
mean = round(mean(age), 2),
sd = round(sd(age), 2))
ddply(dfx, .(group, sex), mutate,
mean = round(mean(age), 2),
sd = round(sd(age), 2))
library(dplyr)
data(Glass,package = "reshape2")
data(Glass,package = "mlbench")
head(Glass)
Glass %>% glimpse()
table(Glass$Type)
aggregate(Glass$Na,list(Type=Glass$Time),mean)
aggregate(Glass$Na,list(Type=Glass$Type),mean)
aggregate(Na=Glass$Na,list(Type=Glass$Type),mean)
aggregate(Glass$Na,Glass$RI,list(Type=Glass$Type),mean)
aggregate(Glass[1:9],list(Type=Glass$Type),mean)
library(plyr)
ddply(Glass,.(Type),summarize,meanNa=mean(Na))
ddply(Glass,.(Type),summarize,mean.Na=mean(Na),mean.RI=mean(RI))
ddply(Glass,.(Type),mutate,mean.Na=mean(Na),mean.RI=mean(RI))
ddply(Glass,.(Type),summarize,mean.Na=mean(Na),mean.RI=mean(RI))
meanElements<-function (){}
meanElements<-function (x){
mean.RI <- mean(x$RI)
mean.Na <- mean(x$Na)
mean.Mg <- mean(x$Mg)
mean.Al <- mean(x$Al)
mean.Si <- mean(x$Si)
mean.K <- mean(x$K)
mean.Ca <- mean(x$Ca)
mean.Ba <- mean(x$Ba)
mean.Fe <- mean(x$Fe)
}
ddply(Glass,.(Type),summarize,meanElements)
meanElements<-function (x){
mean.RI <- mean(x$RI)
mean.Na <- mean(x$Na)
mean.Mg <- mean(x$Mg)
mean.Al <- mean(x$Al)
mean.Si <- mean(x$Si)
mean.K <- mean(x$K)
mean.Ca <- mean(x$Ca)
mean.Ba <- mean(x$Ba)
mean.Fe <- mean(x$Fe)
data.frame(mean.RI=mean.RI,mean.Na=mean.Na,mean.Mg=mean.Mg,mean.Al=mean.Al,mean.Si=mean.Si,mean.K=mean.K,mean.Ca=mean.Ca,mean.Ba=mean.Ba,mean.Fe=mean.Fe)
}
ddply(Glass,.(Type),summarize,meanElements)
ddply(Glass,"Type",summarize,meanElements)
ddply(Glass,.(Type),summarize,meanElements)
meanElements<-function (x){
mean.RI <- mean(x$RI)
mean.Na <- mean(x$Na)
mean.Mg <- mean(x$Mg)
mean.Al <- mean(x$Al)
mean.Si <- mean(x$Si)
mean.K <- mean(x$K)
mean.Ca <- mean(x$Ca)
mean.Ba <- mean(x$Ba)
mean.Fe <- mean(x$Fe)
#data.frame(mean.RI=mean.RI,mean.Na=mean.Na,mean.Mg=mean.Mg,mean.Al=mean.Al,mean.Si=mean.Si,mean.K=mean.K,mean.Ca=mean.Ca,mean.Ba=mean.Ba,mean.Fe=mean.Fe)
data.frame(mean.RI=mean.RI)
}
ddply(Glass,.(Type),summarize,meanElements)
ddply(Glass,.(Type),summarize,meanElements<-function (x){
mean.RI <- mean(x$RI)
mean.Na <- mean(x$Na)
mean.Mg <- mean(x$Mg)
mean.Al <- mean(x$Al)
mean.Si <- mean(x$Si)
mean.K <- mean(x$K)
mean.Ca <- mean(x$Ca)
mean.Ba <- mean(x$Ba)
mean.Fe <- mean(x$Fe)
#data.frame(mean.RI=mean.RI,mean.Na=mean.Na,mean.Mg=mean.Mg,mean.Al=mean.Al,mean.Si=mean.Si,mean.K=mean.K,mean.Ca=mean.Ca,mean.Ba=mean.Ba,mean.Fe=mean.Fe)
data.frame(mean.RI=mean.RI)
})
meanElements<-function (x){
mean.RI <- mean(x$RI)
#mean.Na <- mean(x$Na)
#mean.Mg <- mean(x$Mg)
#mean.Al <- mean(x$Al)
#mean.Si <- mean(x$Si)
#mean.K <- mean(x$K)
#mean.Ca <- mean(x$Ca)
#mean.Ba <- mean(x$Ba)
#mean.Fe <- mean(x$Fe)
#data.frame(mean.RI=mean.RI,mean.Na=mean.Na,mean.Mg=mean.Mg,mean.Al=mean.Al,mean.Si=mean.Si,mean.K=mean.K,mean.Ca=mean.Ca,mean.Ba=mean.Ba,mean.Fe=mean.Fe)
#data.frame(mean.RI=mean.RI)
}
ddply(Glass,.(Type),summarize,meanElements)
meanElements<-function (x){
mean.RI <- mean(x$RI)
#mean.Na <- mean(x$Na)
#mean.Mg <- mean(x$Mg)
#mean.Al <- mean(x$Al)
#mean.Si <- mean(x$Si)
#mean.K <- mean(x$K)
#mean.Ca <- mean(x$Ca)
#mean.Ba <- mean(x$Ba)
#mean.Fe <- mean(x$Fe)
#data.frame(mean.RI=mean.RI,mean.Na=mean.Na,mean.Mg=mean.Mg,mean.Al=mean.Al,mean.Si=mean.Si,mean.K=mean.K,mean.Ca=mean.Ca,mean.Ba=mean.Ba,mean.Fe=mean.Fe)
data.frame(mean.RI=mean.RI)
}
ddply(Glass,.(Type),summarize,meanElements)
meanElements<-function (x){
mean.RI <- mean(RI)
#mean.Na <- mean(x$Na)
#mean.Mg <- mean(x$Mg)
#mean.Al <- mean(x$Al)
#mean.Si <- mean(x$Si)
#mean.K <- mean(x$K)
#mean.Ca <- mean(x$Ca)
#mean.Ba <- mean(x$Ba)
#mean.Fe <- mean(x$Fe)
#data.frame(mean.RI=mean.RI,mean.Na=mean.Na,mean.Mg=mean.Mg,mean.Al=mean.Al,mean.Si=mean.Si,mean.K=mean.K,mean.Ca=mean.Ca,mean.Ba=mean.Ba,mean.Fe=mean.Fe)
data.frame(mean.RI=mean.RI)
}
ddply(Glass,.(Type),summarize,meanElements)
meanElements<-function (x){
mean.RI <- mean(RI)
#mean.Na <- mean(x$Na)
#mean.Mg <- mean(x$Mg)
#mean.Al <- mean(x$Al)
#mean.Si <- mean(x$Si)
#mean.K <- mean(x$K)
#mean.Ca <- mean(x$Ca)
#mean.Ba <- mean(x$Ba)
#mean.Fe <- mean(x$Fe)
#data.frame(mean.RI=mean.RI,mean.Na=mean.Na,mean.Mg=mean.Mg,mean.Al=mean.Al,mean.Si=mean.Si,mean.K=mean.K,mean.Ca=mean.Ca,mean.Ba=mean.Ba,mean.Fe=mean.Fe)
data.frame(mean.RI=mean.RI)
}
ddply(Glass,.(Type),summarize,meanElements)
ddply(Glass,.(Type),summarize,function (x){
mean.RI <- mean(RI)
#mean.Na <- mean(x$Na)
#mean.Mg <- mean(x$Mg)
#mean.Al <- mean(x$Al)
#mean.Si <- mean(x$Si)
#mean.K <- mean(x$K)
#mean.Ca <- mean(x$Ca)
#mean.Ba <- mean(x$Ba)
#mean.Fe <- mean(x$Fe)
#data.frame(mean.RI=mean.RI,mean.Na=mean.Na,mean.Mg=mean.Mg,mean.Al=mean.Al,mean.Si=mean.Si,mean.K=mean.K,mean.Ca=mean.Ca,mean.Ba=mean.Ba,mean.Fe=mean.Fe)
data.frame(mean.RI=mean.RI)
})
ddply(Glass,.(Type),summarize,function (x){
mean.RI <- mean(x$RI)
#mean.Na <- mean(x$Na)
#mean.Mg <- mean(x$Mg)
#mean.Al <- mean(x$Al)
#mean.Si <- mean(x$Si)
#mean.K <- mean(x$K)
#mean.Ca <- mean(x$Ca)
#mean.Ba <- mean(x$Ba)
#mean.Fe <- mean(x$Fe)
#data.frame(mean.RI=mean.RI,mean.Na=mean.Na,mean.Mg=mean.Mg,mean.Al=mean.Al,mean.Si=mean.Si,mean.K=mean.K,mean.Ca=mean.Ca,mean.Ba=mean.Ba,mean.Fe=mean.Fe)
data.frame(mean.RI=mean.RI)
})
ddply(Glass,.(Type),summarize,function (x){
mean.RI <- mean(x$RI)
#mean.Na <- mean(x$Na)
#mean.Mg <- mean(x$Mg)
#mean.Al <- mean(x$Al)
#mean.Si <- mean(x$Si)
#mean.K <- mean(x$K)
#mean.Ca <- mean(x$Ca)
#mean.Ba <- mean(x$Ba)
#mean.Fe <- mean(x$Fe)
#data.frame(mean.RI=mean.RI,mean.Na=mean.Na,mean.Mg=mean.Mg,mean.Al=mean.Al,mean.Si=mean.Si,mean.K=mean.K,mean.Ca=mean.Ca,mean.Ba=mean.Ba,mean.Fe=mean.Fe)
data.frame(mean=mean.RI)
})
ddply(Glass,.(Type),summarize,function (x){
mean.RI <- mean(x$RI)
data.frame(mean=mean.RI)
})
ddply(Glass,.(Type),summarize,function (x){
mean.RI <- mean(x$RI)
})
ddply(Glass,.(Type),summarize,function (x){
mean.RI <- mean(RI)
})
set.seed(1)
d <- data.frame(year = rep(2000:2002, each = 3),count = round(runif(9, 0, 20)))
print(d)
ddply(d, "year", function(x) {
mean.count <- mean(x$count)
sd.count <- sd(x$count)
cv <- sd.count/mean.count
data.frame(cv.count = cv)
})
ddply(d, "year", function(x) {
mean.count <- mean(x$count)
sd.count <- sd(x$count)
cv <- sd.count/mean.count
})
ddply(d, "year", function(x) {
mean.count <- mean(x$count)
sd.count <- sd(x$count)
})
ddply(d, "year", function(x) {
mean.count <- mean(x$count)
})
ddply(d, "year", function(x) {
sd.count <- sd(x$count)
})
ddply(Glass,.(Type),summarize,mean.Na=mean(Na),mean.RI=mean(RI))
ddply(Glass,.(Type),summarize,mean.RI=mean(RI),mean.Na=mean(Na),mean.Mg=mean(Mg),mean.Al=mean(Al),mean.Si=mean(Si),mean.K=mean(K),mean.Ca=mean(Ca),mean.Ba=mean(Ba),mean.Fe=mean(Fe))
Glass %>% group_by(Type)
Glass %>% group_by(Type) %>% summarise (mean.RI=mean(RI),mean.Na=mean(Na),mean.Mg=mean(Mg),mean.Al=mean(Al),mean.Si=mean(Si),mean.K=mean(K),mean.Ca=mean(Ca),mean.Ba=mean(Ba),mean.Fe=mean(Fe))
Glass %>% summarise (mean.RI=mean(RI),mean.Na=mean(Na),mean.Mg=mean(Mg),mean.Al=mean(Al),mean.Si=mean(Si),mean.K=mean(K),mean.Ca=mean(Ca),mean.Ba=mean(Ba),mean.Fe=mean(Fe))
setwd("/home/akshay/courses/stat585X/assignment2")
data("ChickWeight")
library(dplyr)
ChickWeight %>% glimpse()
table(ChickWeight$Diet)
table(ChickWeight$Chick)
movies <- read.csv("../materials/data/movies.csv")
movies %>% glimpse()
table(movies$Movie)
movies %>% group_by(Movie)
movies %>% group_by(Movie) %>% summarise(mean.Gross=mean(Gross))
movies %>% group_by(Movie) %>% summarise(mean.Gross=mean(Gross)) %>% arrange(desc(mean.Gross))
movies %>% group_by(Movie) %>% summarise(mean.Gross=mean(Gross)) %>% arrange((mean.Gross))
movies %>% group_by(Movie) %>% summarise(mean.Gross=mean(Gross)) %>% arrange(desc(mean.Gross))
movies %>% group_by(Movie) %>% summarise(mean.Rank=mean(Rank)) %>% arrange(desc(mean.Rank))
movies %>% group_by(Movie) %>% summarise(mean.Rank=mean(Rank)) %>% arrange(mean.Rank)
movies %>% group_by(Movie) %>% select(Movie, Rank, Days) %>% mutate(Rank-Days=Rank*Days)
movies %>% group_by(Movie) %>% select(Movie, Rank, Days) %>% mutate(Rank-Days=(Rank*Days))
movies %>% group_by(Movie) %>% select(Movie, Rank, Days) %>% mutate(RankDays=(Rank*Days))
movies %>% group_by(Movie) %>% select(Movie, Rank, Days) %>% mutate(RankDays=(Rank*Days)) %>% summarise(mean.RankDays=mean(RankDays)) %>% arrange(mean.RankDays)
movies %>% group_by(Movie) %>% summarise(n=n())
movies %>% group_by(Movie) %>% summarise(n=n()) %>% arrange(n)
movies %>% group_by(Movie) %>% select(Movie,Rank)
movies %>% group_by(Movie) %>% mutate(week.count=count(Rank))
movies %>% group_by(Movie) %>% mutate(week.count=n())
movies %>% group_by(Movie) %>% mutate(week.count=n()) %>% glimpse()
movies %>% group_by(Movie) %>% mutate(week.count=n()) %>% summarise(mean.Rank=sum(Rank)/week.count)
movies %>% group_by(Movie) %>% mutate(week.count=n()) %>% summarise(mean.Rank=(sum(Rank)/week.count))
movies %>% group_by(Movie) %>% mutate(week.count=n()) %>% summarise(mean.Rank=(sum(Rank))
movies %>% group_by(Movie) %>% mutate(week.count=n()) %>% summarise(mean.Rank=(sum(Rank)))
movies %>% group_by(Movie) %>% mutate(week.count=n()) %>% summarise(mean.Rank=(sum(Rank))) %>% arrange(mean.Rank)
movies %>% group_by(Movie) %>% mutate(week.count=n()) %>% select(Movie,Rank,week.count) %>% mutate(sum.Rank=(sum(Rank)))
movies %>% group_by(Movie) %>% mutate(week.count=n()) %>% select(Movie,Rank,week.count) %>% mutate(sum.Rank=(sum(Rank))) %>% mutate(mean.Rank=sum.Rank/week.count)
movies %>% group_by(Movie) %>% mutate(week.count=n()) %>% select(Movie,Rank,week.count) %>% mutate(sum.Rank=(sum(Rank))) %>% mutate(mean.Rank=sum.Rank/week.count) %>% arrange(mean.Rank)
movies %>% group_by(Movie) %>% mutate(week.count=n())
movies %>% group_by(Movie) %>% mutate(week.count=n(),sum.Rank=(sum(Rank))) %>% glimpse()
movies %>% group_by(Movie) %>% mutate(week.count=n(),sum.Rank=(sum(Rank))) %>% group_by(Movie) %>% summarise(mean.Rank=week.count/sum.Rank)
movies %>% group_by(Movie) %>% mutate(week.count=n(),sum.Rank=(sum(Rank))) %>% group_by(Movie) %>% summarise(mean.Rank=(week.count/sum.Rank))
movies %>% group_by(Movie) %>% mutate(week.count=n(),sum.Rank=(sum(Rank))) %>% group_by(Movie) %>% summarise()
movies %>% group_by(Movie) %>% mutate(week.count=n(),sum.Rank=(sum(Rank))) %>% mutate(mean.Rank=(sum.Rank/week.count))
movies %>% group_by(Movie) %>% mutate(week.count=n(),sum.Rank=(sum(Rank))) %>% mutate(mean.Rank=(sum.Rank/week.count)) %>% glimpse()
movies %>% group_by(Movie) %>% mutate(week.count=n(),sum.Rank=(sum(Rank))) %>% mutate(mean.Rank=(sum.Rank/week.count)) %>% filter(Movie=="Split") %>% glimpse()
movies %>% group_by(Movie) %>% mutate(week.count=n(),sum.Rank=(sum(Rank))) %>% mutate(mean.Rank=(sum.Rank/week.count)) %>% filter(Movie=="Hidden Figures") %>% glimpse()
movies %>% group_by(Movie) %>% mutate(week.count=n(),sum.Rank=(sum(Rank))) %>% mutate(mean.Rank=(sum.Rank/week.count)) %>% glimpse()
movies %>% group_by(Movie) %>% mutate(week.count=n(),sum.Rank=(sum(Rank))) %>% mutate(mean.Rank=(sum.Rank/week.count)) %>% group_by(Movie) %>% summarise(mean.Rank=mean(mean.Rank))
movies %>% group_by(Movie) %>% mutate(week.count=n(),sum.Rank=(sum(Rank))) %>% mutate(mean.Rank=(sum.Rank/week.count)) %>% group_by(Movie) %>% summarise(mean.Rank=mean(mean.Rank)) %>% arrange(mean.Rank)
movies %>% group_by(Movie) %>% mutate(sum.Rank=sum(Rank)/24) %>% group_by(Movie) %>% summarise(mean.Rank=mean(mean.Rank)) %>% arrange(mean.Rank)
movies %>% group_by(Movie) %>% mutate(sum.Rank=sum(Rank)/24)
movies %>% group_by(Movie) %>% mutate(sum.Rank=sum(Rank)/24) %>% glimpse()
movies %>% group_by(Movie) %>% mutate(mean2year.Rank=sum(Rank)/24) %>% glimpse()
movies %>% group_by(Movie) %>% mutate(mean2year.Rank=sum(Rank)) %>% glimpse()
movies %>% group_by(Movie) %>% mutate(mean2year.Rank=sum(Rank)/24) %>% glimpse()
movies %>% group_by(Movie) %>% mutate(mean2year.Rank=sum(Rank)/24) %>% group_by(Movie) %>% summarise(mean2year.Rank=mean(mean2year.Rank))
movies %>% group_by(Movie) %>% mutate(mean2year.Rank=sum(Rank)/24) %>% group_by(Movie) %>% summarise(mean2year.Rank=mean(mean2year.Rank)) %>% arrange(mean2year.Rank)
movies %>% group_by(Movie) %>% mutate(nweeks=n())
movies %>% group_by(Movie) %>% mutate(nweeks=n()) %>% glimpse()
movies %>% group_by(Movie) %>% summerize(nweeks=n())
movies %>% group_by(Movie) %>% summarize(nweeks=n())
movies %>% group_by(Movie) %>% summarize(nweeks=n()) %>% arrange(desc(nweeks))
movies %>% group_by(Movie) %>% filter(Rank<=10) %>% summarize(nweeks=n()) %>% arrange(desc(nweeks))
movies %>% group_by(Movie) %>% filter(Rank<=5) %>% summarize(nweeks=n()) %>% arrange(desc(nweeks))
